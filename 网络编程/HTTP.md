# HTTP

**HTTP协议**，即超文本传输协议(Hypertext transfer protocol)。是一种详细规定了浏览器和万维网服务器之间互相通信的规则，通过因特网传送万维网文档的数据传送协议。 

**URI和URL**
URI (Uniform Resource Identifier) 统一资源标志符
URL(Universal Resource Locator) 统一资源定位符
URL是URI的子集， URI还包括一个子类,URN (Universal Resource Name) 统一资源名称，URN
只命名资源不不指定如何定位资源。

### HTTP请求和响应

#### HTTP请求 = 请求行+请求头+空行+[消息体]

![](img/20190310211527.png)

在网上截了张图对比看

![](img/cdc4dbbb-f98e-31d5-8270-3c37bf1c54e5.jpg)

* 1.请求方法（常用的有GET和POST)

  GET和POST的区别：

  * GET请求的参数直接在URL里，最多只有1024字节，而POST没有限制
  * GET比POST更不不安全，因为参数直接暴暴露露在URL上，所以不能用来传递敏感信息
  * GET参数通过URL传递，POST放在Request body中
  * GET请求的参数只能是ASCII码，所以中文需要URL编码，而POST请求传参没有这个限制 

* 2.请求头

  Cache-Control
  指定了了服务器器和客户端在交互时遵循的缓存机制，即是否要留留下缓存页面数据。

  User-Agent
  用户代理理，服务器器从此处知道客户端的操作系统类型和版本，电脑CPU类型，浏览器器
  种类版本

  Accept
  指定客户端可以接受的内容类型，⽐比如⽂文本，图⽚片，应⽤用等等，内容的先后排序表示客户端接

  Accept-Language
  客户端可以接受的语⾔言类型，参数值规范和 accept的很像。⼀一般就接收中⽂文和英⽂文

  Accept-Encoding
  客户端接收编码类型，⼀一些⽹网络压缩格式

  Accept-Charset
  指的是规定好服务器器处理理表单数据所接受的字符集，也就是说，客户端告诉服务器器⾃自⼰己
  的表单数据的字符集类型，⽤用以正确接收

  Referer
  浏览器器上次访问的⽹网⻚页url

  Host
  访问的服务器器主机名，⽐比如百度的 www.baidu.com。

请求体 (Request Body)
POST请求体有内容，GET请求，请求体为空
设置Request Header Content-Type
application/x-www-form-urlencoded 表单数据
multipart/form-data 表单文件上传
application/json 序列列化json数据
text/xml xml数据





**HTTP响应 = 响应行+响应头+空行+消息体**

![](img/20190310222622.png)

![](img/680ea130d3484535d50c9e2d217be7a6.png)



* 常见的响应状态码

  100：该状态码说明服务器收到了请求的初始部分，并且请客户端继续发送。在服务器发送了 100 Continue 状态码之后，如果收到客户端的请求，则必须进行响应 （假如客户端有一个较大的文件需要上传，但是客户端不知道服务器是否愿意接受这个文件，所以客服端先询问一下服务器的意愿 ）

  200：请求已成功，请求所希望的响应头或数据体将随此响应返回 

  201：请求完成，结果是创建了新资源。新创建资源的URI可在响应的实体中得到 处理方式：爬虫中不会遇到

  202：服务器已接受请求，但尚未处理 

  204：服务器端已经实现了请求，但是没有返回新的信息。

  301：请求到的资源都会分配一个永久的URL

  302：请求的资源现在临时从不同的URI响应请求 （比如未登陆的用户访问用户中心重定向到登录页面。）

  **注意：**302重定向只是暂时的重定向，搜索引擎会抓取新的内容而保留旧的地址，而301重定向是永久的重定向，搜索引擎在抓取新的内容的同时也将旧的网址替换

  304：客户端已经执行了GET，但文件未变化 

  400：当前请求无法被服务器理解 （或请求参数有误）

  401：当前请求需要用户验证 

  403：服务器已经理解请求，但是拒绝执行它 

  404：请求失败，请求所希望得到的资源未被在服务器上发现 

  500：服务器内部错误 服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理。

  501：服务器不支持当前请求所需要的某个功能。当服务器无法识别请求的方法，并且无法支持其对任何资源的请求 

  502：作为网关或者代理工作的服务器尝试执行请求时，从上游服务器接收到无效的响应 

  503：服务出错 由于临时的服务器维护或者过载，服务器当前无法处理请求。这个状况是临时的，并且将在一段时间以后恢复。

  

**响应头**
Date，标识 Response 产生的时间。
Last-Modified：指定资源的最后修改时间。
Content-Encoding：指定 Response 内容的编码。
Server：包含了了服务器器的信息，名称，版本号等。
Content-Type：文档类型，指定了了返回的数据类型是什什么，如texthtml 则代表返回 HTML 文
档，applicationx-javascript 则代表返回 JavaScript 文件，image/jpeg 则代表返回了了图片。
Set-Cookie：设置Cookie，Response Headers 中的 Set-Cookie即告诉浏览器器需要将此内容
放在 Cookies 中，下次请求携带 Cookies 请求。
Expires：指定 Response 的过期时间，使用它可以控制代理理服务器器或浏览器器将内容更更新到缓
存中，如果再次访问时，直接从缓存中加载，降低服务器器负载，缩短加载时间。

